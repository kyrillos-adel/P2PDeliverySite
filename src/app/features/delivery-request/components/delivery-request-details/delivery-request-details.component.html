<section class="py-5 container">
    <div class="row">
      <div class="col-lg-8 col-md-12 mx-auto">
        <h1>{{deliveryRequestDetails.title}}</h1>
      </div>      
      <div class="col-lg-4 col-md-4">
        @if (deliveryRequestDetails.applicationDTOs.length == 0) {
        <button class="btn btn btn-main d-flex ms-auto" (click)="openPopup(deliveryRequestDetails.id)">Add Application</button>
      }
      </div>
    </div>
    
    <div class="row py-lg-5 ">
      <div class="col-lg-8 col-md-12 mx-auto">
        <h5 class="font-weight-light">request details</h5>
        <hr style="width:95%">
          <p [innerHTML]="deliveryRequestDetails.description"></p>
      </div>
      <div class="col-lg-4 col-md-4 mx-auto">
        <h5 class="font-weight-light">Requester</h5>
        <hr style="width:95%">
        
        <div class="d-flex align-items-center mb-5">
          <img src="https://mdbootstrap.com/img/new/avatars/8.jpg" alt="" style="width: 45px; height: 45px"
          class="rounded-circle" />
          <div class="ms-3">
            <p class="fw-bold mb-1">{{deliveryRequestDetails.userName}}</p>
            <!-- <p class="text-muted mb-0">john.doe@gmail.com</p> -->
          </div>
        </div>

        <h5 class="font-weight-light">Request Details</h5>
        <hr style="width:95%">            
        <div class="fw-bold mb-lg-2">Weight: <span class="text-muted">{{deliveryRequestDetails.totalWeight}}kgm</span></div>
        <div class="fw-bold mb-lg-2">PickUpLocation: <span class="text-muted"> {{deliveryRequestDetails.pickUpLocation}}</span></div>
        <div class="fw-bold mb-lg-2">DropOffLocation: <span class="text-muted">{{deliveryRequestDetails.dropOffLocation}}</span></div>
        <div class="fw-bold mb-lg-2">PickUpDate: <span class="text-muted">{{deliveryRequestDetails.pickUpDate}}</span></div>
        <div class="fw-bold mb-lg-2">price: <span class="text-muted">{{deliveryRequestDetails.minPrice}}-{{deliveryRequestDetails.maxPrice}} EGP </span></div>
        <div class="fw-bold mb-lg-2">Request Status: <span class="text-muted"> {{deliveryRequestDetails.status}} </span></div>
    </div>
    </div>
    <hr>
    
  </section>
  @if (deliveryRequestDetails.applicationDTOs.length>0) {
  <section class="container mb-3">
    <h1 class="font-weight-light text-center">Offered Applications</h1>
    @for(app of deliveryRequestDetails.applicationDTOs; track app){
    <div class="container py-2">
      <div class="card-custom">
          <div class="left-section">
              <img src="https://mdbootstrap.com/img/new/avatars/8.jpg" alt="Profile" class="profile-img">
              <div class="info">
                  <span class="badge bg-success status-badge" *ngIf="app.applicationStatus === 'Accepted'">{{ app.applicationStatus }}</span>
                  <span class="badge bg-warning text-dark status-badge" *ngIf="app.applicationStatus === 'Pending'">{{ app.applicationStatus }}</span>
                  <span class="badge bg-danger status-badge" *ngIf="app.applicationStatus === 'Rejected'">{{ app.applicationStatus }}</span>
                  <span class="badge bg-secondary status-badge" *ngIf="!['Accepted','Pending','Rejected'].includes(app.applicationStatus)">
                    {{ app.applicationStatus }}
                  </span>
                  <div class="fw-bold fs-5">{{app.userName}}</div>
                  <div class="text-muted small mb-1">{{app.date}}</div>
                  <div class="stars">
                      ★ ★ ★ ★ ☆
                  </div>
              </div>
          </div>
          
  
          <div class="triangle-section me-5">
              <div class="p-3">{{app.offeredPrice}}</div>
              <div>EGP</div>
          </div>
          
          <div class="right-section">          
              <div class="d-flex flex-column align-items-center">
                  <button class="btn chat-btn btn-main mb-2">Chat</button>
                  <div class="">
                      <label for="status" class="form-label fw-bold mb-1">Change status:</label>
                      <div class="d-flex align-items-center row">
                        <div class="col-8">
                        <select class="form-select me-3" aria-label="Default select example">
                          <option selected>select status</option>
                          @if(app.applicationStatus === 'Accepted'){
                          <option value="2">Reject</option>
                          }
                          @if(app.applicationStatus === 'Rejected'){
                              <option value="1">Accept</option>
                          }
                          @if(app.applicationStatus === 'Pending'){
                            <option value="1">accept</option>
                            <option value="2">Reject</option>
                          }    
                          
                        </select>
                      </div>
                          <div class="col-4"> 
                          <button class="btn save-btn btn-main btn-sm">Save</button>
                        </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
    </div>
    }
    </section>
}


  