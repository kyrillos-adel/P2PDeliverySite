<div class="container mt-5">
  <div class="d-flex justify-content-center align-items-center mb-3">
    <h2 class="fw-bold" style="color: var(--dark) ;">My Delivery Requests</h2>
   
  </div>

  <div class="card col-md-8 mx-auto shadow-sm mb-4">
    <div class="card-body d-flex align-items-center gap-3 flex-wrap">
      <div class="flex-grow-1">
        <input
          type="text"
          class="form-control rounded-pill bg-light border-0 shadow-sm ps-4"
          placeholder="Start a delivery request..."
          (click)="navigateToCreatePost()"
          readonly
          style="height: 45px;"
        />
      </div>
    </div>
  </div>


  <div *ngFor="let request of deliveryRequests" class="card post-card mb-4 shadow-sm border-1 col-md-8 mx-auto mb-4">
    <div class="card-body">
      <span class="badge bg-success status-badge" *ngIf="request.status === 'Accepted'">{{ request.status }}</span>
      <span class="badge bg-warning text-dark status-badge" *ngIf="request.status === 'Pending'">{{ request.status }}</span>
      <span class="badge bg-danger status-badge" *ngIf="request.status === 'Cancelled'">{{ request.status }}</span>
      <span class="badge bg-info status-badge" *ngIf="request.status === 'Completed'">{{ request.status }}</span>
      <span class="badge bg-warning status-badge" *ngIf="request.status === 'Delivered'">{{ request.status }}</span>
      <span class="badge bg-secondary status-badge" *ngIf="!['Accepted','Pending','Cancelled','Completed','Delivered'].includes(request.status)">
        {{ request.status }}
      </span>
      <div class="card-header bg-transparent d-flex justify-content-between align-items-center flex-wrap">
        
        <div>
          <h3 class="mb-0">{{ request.title }}</h3>
        </div>
      

        <div class="d-flex align-items-center gap-2">
          <h5
            class="text-muted mb-0"
            style="font-size: 1rem; cursor: pointer;"
            [routerLink]="['/profile', request.userId]">
            {{ request.userName }}
          </h5>
          <img
            *ngIf="request.profileImageUrl"
            [src]="imageBaseUrl + request.profileImageUrl"
            alt="Profile Image"
            class="rounded-circle"
            style="width: 50px; height: 50px; object-fit: cover;" />
      
          <div
            *ngIf="!request.profileImageUrl"
            class="d-flex justify-content-center align-items-center rounded-circle bg-secondary text-white fw-bold"
            style="width: 50px; height: 50px; font-size: 1.3rem;">
            {{ request.userName.charAt(0).toUpperCase() }}
          </div>
        </div>
      </div>
      

      <p class=" my-4 container text-muted">{{ request.description }}</p>
  
      <ul class="list-unstyled mt-1 d-flex flex-wrap gap-4">
        <li class="mb-1">
          <strong>âš–ï¸ Weight:</strong> {{ request.totalWeight }} kg
        </li>
        <li class="mb-1">
          <strong>ğŸ“ From:</strong> {{ request.pickUpLocation }}
        </li>
        <li class="mb-1">
          <strong>ğŸ“¦ To:</strong> {{ request.dropOffLocation }}
        </li>
        <li class="mb-1">
          <strong>ğŸ“… Pickup Date:</strong> {{ request.pickUpDate | date: 'mediumDate' }}
        </li>
      </ul>
      
      <div *ngIf="request.drImageUrl" class="text-center my-3">
        <img 
          [src]="imageBaseUrl + request.drImageUrl" 
          alt="Delivery Request Image" 
          class="img-fluid rounded" 
          style="max-height: 300px; object-fit: cover;"
        />
      </div>

      <hr class="my-3" />

      <div class="d-flex flex-column flex-sm-row justify-content-center gap-2 px-2">
        <button 
          [routerLink]="['/deliveryrequests/details', request.id]" 
          class="link-button" > <i class="bi bi-eye"></i> View Details </button>
      </div>
      
    </div>
  </div>
</div>
