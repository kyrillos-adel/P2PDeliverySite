
<div class="container mt-4">
  <form [formGroup]="updateForm" (ngSubmit)="onSubmit()" novalidate>
    <!-- Title -->
    <div class="mb-3">
      <label for="title" class="form-label">Title</label>
      <input type="text" class="form-control" id="title" formControlName="title">

      @if (updateForm.get('title')?.invalid && (updateForm.get('title')?.dirty || updateForm.get('title')?.touched)) {
        <div class="text-danger">
          @if (updateForm.get('title')?.errors?.['required']) {
            <small>Title is required</small>
          }
          @if (updateForm.get('title')?.errors?.['maxlength']) {
            <small>Title must be less than 100 characters</small>
          }
        </div>
      }
    </div>

    <!-- Description -->
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea class="form-control" id="description" rows="3" formControlName="description"></textarea>

      @if (updateForm.get('description')?.invalid && (updateForm.get('description')?.dirty || updateForm.get('description')?.touched)) {
        <div class="text-danger">
          @if (updateForm.get('description')?.errors?.['required']) {
            <small>Description is required</small>
          }
          @if (updateForm.get('description')?.errors?.['maxlength']) {
            <small>Description must be less than 500 characters</small>
          }
        </div>
      }
    </div>

    <!-- Pickup Location -->
    <div class="mb-3">
      <label for="pickUpLocation" class="form-label">Pickup Location</label>
      <input type="text" class="form-control" id="pickUpLocation" formControlName="pickUpLocation">

      @if (updateForm.get('pickUpLocation')?.invalid && (updateForm.get('pickUpLocation')?.dirty || updateForm.get('pickUpLocation')?.touched)) {
        <div class="text-danger">
          @if (updateForm.get('pickUpLocation')?.errors?.['required']) {
            <small>Pickup location is required</small>
          }
        </div>
      }
    </div>

    <!-- Dropoff Location -->
    <div class="mb-3">
      <label for="dropOffLocation" class="form-label">Dropoff Location</label>
      <input type="text" class="form-control" id="dropOffLocation" formControlName="dropOffLocation">

      @if (updateForm.get('dropOffLocation')?.invalid && (updateForm.get('dropOffLocation')?.dirty || updateForm.get('dropOffLocation')?.touched)) {
        <div class="text-danger">
          @if (updateForm.get('dropOffLocation')?.errors?.['required']) {
            <small>Dropoff location is required</small>
          }
        </div>
      }
    </div>

    <!-- Pickup Date -->
    <div class="mb-3">
      <label for="pickUpDate" class="form-label">Pickup Date</label>
      <input type="date" class="form-control" id="pickUpDate" formControlName="pickUpDate">

      @if (updateForm.get('pickUpDate')?.invalid && (updateForm.get('pickUpDate')?.dirty || updateForm.get('pickUpDate')?.touched)) {
        <div class="text-danger">
          @if (updateForm.get('pickUpDate')?.errors?.['required']) {
            <small>Pickup date is required</small>
          }
        </div>
      }
    </div>

    <!-- Price Range -->
    <div class="row mb-3">
      <div class="col-md-6">
        <label for="minPrice" class="form-label">Minimum Price ($)</label>
        <input type="number" class="form-control" id="minPrice" formControlName="minPrice">

        @if (updateForm.get('minPrice')?.invalid && (updateForm.get('minPrice')?.dirty || updateForm.get('minPrice')?.touched)) {
          <div class="text-danger">
            @if (updateForm.get('minPrice')?.errors?.['required']) {
              <small>Minimum price is required</small>
            }
            @if (updateForm.get('minPrice')?.errors?.['min']) {
              <small>Price must be 0 or more</small>
            }
          </div>
        }
      </div>
      <div class="col-md-6">
        <label for="maxPrice" class="form-label">Maximum Price ($)</label>
        <input type="number" class="form-control" id="maxPrice" formControlName="maxPrice">

        @if (updateForm.get('maxPrice')?.invalid && (updateForm.get('maxPrice')?.dirty || updateForm.get('maxPrice')?.touched)) {
          <div class="text-danger">
            @if (updateForm.get('maxPrice')?.errors?.['required']) {
              <small>Maximum price is required</small>
            }
            @if (updateForm.get('maxPrice')?.errors?.['min']) {
              <small>Price must be 0 or more</small>
            }
          </div>
        }
      </div>

      <!-- Delivery Request Image -->
  <div class="mb-3">
    <label for="DRimage" class="form-label">Update Image</label>
    <input type="file" class="form-control" id="DRimage" (change)="onFileChange($event)" accept="image/*">
  </div>

    </div>

    <!-- Form-level validation -->
    @if (updateForm.errors?.['priceRange']) {
      <div class="alert alert-danger mb-3">
        Maximum price must be greater than minimum price
      </div>
    }

    <!-- Submit Button -->
    <div class="d-grid gap-2">
      <button type="submit" class="btn btn-primary" [disabled]="updateForm.invalid">
        Update Delivery Request
      </button>
    </div>
  </form>
</div>
