<div class="container mt-5">
  <div class="row">
    <div class="col-md-3 d-none d-md-block" *ngIf="isLoggedIn">
      <div class="card shadow-sm p-3" style="max-width: 250px;">
      <div class="text-center mb-3">
    <div class="rounded-circle text-white mx-auto fw-bold" style="width: 60px; height: 60px; line-height: 60px; font-size: 1.5rem;">
      {{ user?.userName?.charAt(0).toUpperCase() }}
    </div>
    <h5 class="mt-2">{{ user?.fullName }}</h5>
    <h6 class="text-muted mb-1">{{ user?.userName }}</h6>
    <p class="text-muted mb-1">{{ user?.email }}</p>
    <a [routerLink]="['/edit-profile']" class="btn btn-sm btn-outline-primary w-100">View Profile</a>
  </div>
</div>

    </div>

    <div [ngClass]="{
      'col-md-7': isLoggedIn,
      'col-md-8 mx-auto': !isLoggedIn,
      'col-12': true
    }">
      <div class="card shadow-sm mb-4">
        <div class="card-body d-flex align-items-center gap-3 flex-wrap">
          <div *ngIf="isLoggedIn"
            class="d-flex justify-content-center align-items-center rounded-circle text-white fw-bold"
            style="width: 50px; height: 50px; font-size: 1.3rem;"
          >
            {{ user?.userName?.charAt(0).toUpperCase() }}
          </div>
      
          <div class="flex-grow-1">
            <input
              type="text"
              class="form-control rounded-pill bg-light border-0 shadow-sm ps-4"
              placeholder="Start a delivery request..."
              (click)="navigateToCreatePost()"
              readonly
              style="height: 45px;"
            />
          </div>
        </div>
      </div>

      <h3 class="mb-4 text-center" style="color: #19283f; font-weight: bold; font-size: 2rem;">Available Delivery Requests</h3>

      <div *ngFor="let request of deliveryRequests" class="card post-card mb-4 shadow-sm border-1">
        <div class="card-body">
          <div class="d-flex align-items-center gap-2">
            <div class="d-flex justify-content-center align-items-center rounded-circle text-white fw-bold" style="width: 50px; height: 50px; font-size: 1.3rem;">
              {{ request.userName.charAt(0).toUpperCase() }}
            </div>
            
            <h5 class="text-black mb-1" style="font-size: 1.1rem; cursor: pointer;" [routerLink]="['/profile', request.userId]">
              {{ request.userName }}
            </h5>
          </div>
          

          <ul class="list-unstyled mt-1">
            <li class="mb-2">
              <span class="text-muted">{{ request.description }}</span>
            </li>
            <li class="mb-2"><strong>‚öñÔ∏è Weight:</strong> {{ request.totalWeight }} kg</li>
            <li class="mb-2"><strong>üìç From:</strong> {{ request.pickUpLocation }}</li>
            <li class="mb-2"><strong>üì¶ To:</strong> {{ request.dropOffLocation }}</li>
            <li class="mb-2"><strong>üìÖ Pickup Date:</strong> {{ request.pickUpDate | date: 'mediumDate' }}</li>
          </ul>




          <hr class="my-3" />

          <div class="d-flex flex-column flex-sm-row justify-content-center gap-2 px-2">
            <button 
              [routerLink]="['/deliveryrequests/details', request.id]" 
              class="link-button"
            >
              <i class="bi bi-eye"></i> View Details
            </button>
          
            <button 
              (click)="openPopup(request.id)" 
              class="link-button"
            >
              <i class="bi bi-plus-circle"></i> Add Application
            </button>
          </div>
          

        </div>
      </div>
    </div>
  </div>
</div>
