<form *ngIf="registerForm" [formGroup]="registerForm" (ngSubmit)="onSubmit()"
  class="card p-4 mx-auto mt-5 shadow-sm rounded" style="max-width: 800px;">

  <h2 class="text-center mb-4 fw-bold">Create Your Account</h2>

  <div class="row">
    <!-- National ID -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">National ID</label>
      <input class="form-control bg-light" formControlName="natId" placeholder="Enter your National ID" />
      <div class="text-danger small" *ngIf="natId?.invalid && natId?.touched">
        <div *ngIf="natId?.errors?.['required']">Required</div>
        <div *ngIf="natId?.errors?.['pattern']">Invalid ID</div>
      </div>
    </div>

    <!-- Full Name -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">Full Name</label>
      <input class="form-control bg-light" formControlName="fullName" placeholder="Enter full name" />
      <div class="text-danger small" *ngIf="fullName?.invalid && fullName?.touched">
        <div *ngIf="fullName?.errors?.['required']">Required</div>
        <div *ngIf="fullName?.errors?.['minlength'] || fullName?.errors?.['maxlength']">5–12 characters</div>
        <div *ngIf="fullName?.errors?.['pattern']">Letters and spaces only</div>
      </div>
    </div>

    <!-- Username -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">Username</label>
      <input class="form-control bg-light" formControlName="userName" placeholder="Choose a username" />
      <div class="text-danger small" *ngIf="notvalidusername">{{ notvalidusername }}</div>
      <div class="text-danger small" *ngIf="userName?.invalid && userName?.touched">
        <div *ngIf="userName?.errors?.['required']">Required</div>
        <div *ngIf="userName?.errors?.['minlength'] || userName?.errors?.['maxlength']">4–10 characters</div>
      </div>
    </div>

    <!-- Email -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">Email</label>
      <input class="form-control bg-light" formControlName="email" placeholder="Enter your email" />
      <div class="text-danger small" *ngIf="notvalidemail">Email already exists</div>
      <div class="text-danger small" *ngIf="email?.invalid && email?.touched">
        <div *ngIf="email?.errors?.['required']">Required</div>
        <div *ngIf="email?.errors?.['email']">Invalid email</div>
        <div *ngIf="email?.errors?.['pattern']">Example: "john&commat;example.com"</div>
      </div>
    </div>

    <!-- Phone -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">Phone</label>
      <input class="form-control bg-light" formControlName="phone" placeholder="Enter phone number" />
      <div class="text-danger small" *ngIf="phone?.invalid && phone?.touched">
        <div *ngIf="phone?.errors?.['required']">Required</div>
        <div *ngIf="phone?.errors?.['pattern']">Invalid phone number</div>
      </div>
    </div>

    <!-- Address -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">Governorate</label>
      <select class="form-select bg-light" formControlName="address">
        <option value="" disabled selected>Select Governorate</option>
        <option *ngFor="let gov of egyptGovernorates" [value]="gov">{{ gov }}</option>
      </select>
    </div>

    <!-- Password -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">Password</label>
      <input type="password" class="form-control bg-light" formControlName="password" placeholder="Create a password" />
      <div class="text-danger small" *ngIf="password?.invalid && password?.touched">
        <div *ngIf="password?.errors?.['required']">Required</div>
        <div *ngIf="password?.errors?.['minlength']">At least 8 characters</div>
        <div *ngIf="password?.errors?.['pattern']">Include uppercase, lowercase, number, symbol</div>
      </div>
    </div>

    <!-- Confirm Password -->
    <div class="mb-3 col-md-6">
      <label class="form-label fw-semibold">Confirm Password</label>
      <input type="password" class="form-control bg-light" formControlName="confirmPassword" placeholder="Confirm your password" />
      <div class="text-danger small" *ngIf="confirmPassword?.invalid && confirmPassword?.touched">
        <div *ngIf="confirmPassword?.errors?.['required']">Required</div>
        <div *ngIf="confirmPassword?.errors?.['mismatch']">Passwords do not match</div>
      </div>
    </div>
  </div>

  <div class="d-flex flex-column align-items-center mt-4 gap-2">
    <button type="submit" class="btn text-white w-75 py-2" style="background-color: #dc3c14;">
      Register
    </button>
    <a routerLink="/login" class="btn text-white w-75 py-2" style="background-color: #3c4c4b;">
      Back to Login
    </a>
  </div>
</form>
